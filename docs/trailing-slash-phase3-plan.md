# 3단계: 중복 라우트 정리 계획

## 개요
TrailingSlashMiddleware가 안정화된 후, 1단계에서 추가한 중복 라우트들을 제거하여 코드베이스를 정리합니다.

## 현재 상태
- 1단계: 긴급 패치로 trailing slash 버전 추가
- 2단계: 미들웨어로 POST/PUT/PATCH 자동 처리 ✅

## 제거 대상 라우트
```python
# 1단계에서 추가한 중복 라우트들
@router.get("/me/")  # 제거 예정
@router.get("/count/")  # 제거 예정
@router.get("/available/")  # 제거 예정
@router.get("/users/")  # 제거 예정
```

## 실행 계획

### Phase 3-1: 영향도 분석 (1일)
1. 프론트엔드 코드에서 해당 엔드포인트 호출 패턴 분석
2. 로그 분석으로 실제 사용 빈도 확인
3. 테스트 케이스 영향도 파악

### Phase 3-2: 점진적 제거 (2-3일)
1. **우선순위 1**: POST/PUT/PATCH 엔드포인트의 중복 제거
   - 이미 미들웨어가 처리하므로 안전

2. **우선순위 2**: 사용 빈도 낮은 GET 엔드포인트
   - 내부 API나 관리자용 엔드포인트부터

3. **우선순위 3**: 핵심 GET 엔드포인트
   - /auth/me, /customers/count 등
   - 프론트엔드 수정과 동기화 필요

### Phase 3-3: 문서 정리 (1일)
1. OpenAPI 스펙 정리 (하나의 경로만 노출)
2. API 문서 업데이트
3. 개발자 가이드 업데이트

## 위험 관리
- 각 제거 단계마다 스테이징 환경에서 24시간 모니터링
- 롤백 계획: git revert로 즉시 복구 가능
- 프론트엔드와 백엔드 배포 시점 조율

## 성공 지표
- [ ] 중복 라우트 0개
- [ ] API 응답 시간 변화 없음
- [ ] 에러율 증가 없음
- [ ] OpenAPI 문서 일관성

## 예상 일정
- 전체 소요 시간: 1주일
- 안정화 기간: 2주일
- 최종 완료: 2025년 7월 중순

## 주의사항
- GET 엔드포인트는 캐시 영향 고려
- 외부 연동 시스템 확인 필요
- 모바일 앱 버전 호환성 체크
