# 2025년 5월 AIBIO 결제현황 데이터 구조 분석

## 1. 컬럼 구조 (총 14개 컬럼)

1. **번호** - 순번 (정수)
2. **결제일자** - 결제가 이루어진 날짜 (datetime)
3. **고객명** - 고객 이름 (문자열)
4. **결제 프로그램** - 구매한 프로그램/상품명 (문자열)
5. **결제 금액** - 결제 금액 (정수, 원 단위)
6. **카드 명의자명** - 결제 카드 소유자 이름 (문자열)
7. **승인번호** - 카드 승인번호 또는 "계좌이체" (문자열)
8. **결제 담당자** - 결제를 처리한 직원명 (문자열)
9. **유입** - 고객 유입 경로 (문자열)
10. **등급** - 고객 등급 (신규/재구매)
11. **구매** - 구매 차수 (첫체험/N회차구매)
12. **세션시작일** - 서비스 시작일 (문자열, YYYY.MM.DD 형식)
13. **계약만료일** - 서비스 만료일 (문자열, YYYY.MM.DD 형식)
14. **기타** - 추가 정보 (문자열)

## 2. 데이터 타입

| 컬럼명 | 데이터 타입 | 형식 | 비고 |
|--------|------------|------|------|
| 번호 | object | 정수 | 1부터 시작하는 순번 |
| 결제일자 | datetime64[ns] | YYYY-MM-DD | 자동 datetime 변환 |
| 고객명 | object | 한글 이름 | |
| 결제 프로그램 | object | 프로그램명 | 줄바꿈 포함 가능 |
| 결제 금액 | int64 | 숫자 | 원 단위 |
| 카드 명의자명 | object | 한글 이름 | |
| 승인번호 | object | 숫자 또는 "계좌이체" | |
| 결제 담당자 | object | 한글 이름 | |
| 유입 | object | 유입 경로 | |
| 등급 | object | "신규" 또는 "재구매" | |
| 구매 | object | "첫체험" 또는 "N회차구매" | |
| 세션시작일 | object | YYYY.MM.DD | 문자열 형식 |
| 계약만료일 | object | YYYY.MM.DD | 문자열 형식 |
| 기타 | object | 자유 텍스트 | |

## 3. 실제 데이터 예시

### 예시 1: 첫체험 고객
- 번호: 1
- 결제일자: 2025-05-02
- 고객명: 권순식
- 결제 프로그램: 첫체험(브레인,림프,펄스X2)
- 결제 금액: 39,600원
- 카드 명의자명: 권순식
- 승인번호: 30077695
- 결제 담당자: 이수경
- 유입: 지인소개
- 등급: 신규
- 구매: 첫체험

### 예시 2: 재구매 고객
- 번호: 3
- 결제일자: 2025-05-03
- 고객명: 박지영
- 결제 프로그램: 화이트태닝 로션
- 결제 금액: 44,000원
- 카드 명의자명: 박지영
- 승인번호: 24616923
- 결제 담당자: 이수경
- 유입: 지인소개
- 등급: 재구매
- 구매: 3회차구매

### 예시 3: 패키지 구매
- 번호: 28
- 결제일자: 2025-05-27
- 고객명: 이다윤
- 결제 프로그램: 올케어 120회
- 결제 금액: 7,920,000원
- 카드 명의자명: 이다윤
- 승인번호: 계좌이체
- 결제 담당자: 이수경
- 유입: 유튜브
- 등급: 신규
- 구매: 1회차구매
- 세션시작일: 2025.05.27
- 계약만료일: 2025.09.27

## 4. 특별한 형식 및 패턴

### 4.1 결제 프로그램 패턴
- **첫체험**: 첫체험(레드), 첫체험(림프), 첫체험(올케어) 등
- **회차 상품**: 레드 10회, 펄스 20회, 올케어 40회, 올케어 120회 등
- **제품**: 화이트태닝 로션, 영데이즈, 다래케어, 클린밸런스 등
- **복합 상품**: 여러 제품을 줄바꿈으로 구분 (예: "스트레스 노화 분석, 저속노화 효소...")

### 4.2 유입 경로
- 당근 (56.3%)
- 유튜브 (21.9%)
- 지인소개 (15.6%)
- 선시티 (3.1%)
- 바이오컴 (3.1%)

### 4.3 승인번호 형식
- 대부분 8자리 숫자
- "계좌이체"로 표기된 경우도 있음

### 4.4 날짜 형식
- 결제일자: datetime 형식 (2025-05-02 00:00:00)
- 세션시작일/계약만료일: 문자열 형식 (2025.05.27)

### 4.5 금액 범위
- 최소: 9,900원 (첫체험)
- 최대: 7,920,000원 (올케어 120회)
- 평균: 723,231원

## 5. 데이터 업로드 시 주의사항

1. **헤더 위치**: 엑셀 파일의 3번째 행(인덱스 2)에 헤더가 위치
2. **빈 행**: 파일 상단에 2개의 빈 행이 존재
3. **날짜 형식 변환**:
   - 결제일자: datetime 자동 변환
   - 세션시작일/계약만료일: 문자열로 저장 (YYYY.MM.DD)
4. **금액 처리**: 정수형으로 처리
5. **줄바꿈 처리**: 결제 프로그램 컬럼에 줄바꿈 문자 포함 가능
6. **NULL 값**: 세션시작일, 계약만료일, 기타 컬럼은 대부분 NULL

## 6. 데이터베이스 매핑 제안

```python
column_mapping = {
    '번호': 'sequence_number',
    '결제일자': 'payment_date',
    '고객명': 'customer_name',
    '결제 프로그램': 'program_name',
    '결제 금액': 'amount',
    '카드 명의자명': 'card_holder_name',
    '승인번호': 'approval_number',
    '결제 담당자': 'staff_name',
    '유입': 'inflow_channel',
    '등급': 'customer_grade',
    '구매': 'purchase_type',
    '세션시작일': 'session_start_date',
    '계약만료일': 'contract_end_date',
    '기타': 'notes'
}
```
