# AIBIO 센터 관리 시스템 PRD v2.0 (Updated Based on Real Data Analysis)

## 1. 프로젝트 개요

### 1.1 배경
- **현재 상황**: 엑셀 파일(고객관리대장2025.xlsm)로 관리되는 복잡한 고객 데이터
- **실제 데이터 복잡성**: 
  - 67명 고객, 147건 방문기록 (2025년 5월)
  - 5가지 서비스 타입 (브레인, 펄스, 림프, 레드, AI바이크)
  - 개별 세션별 장비 설정 및 지속시간 상세 기록
  - 패키지별 잔여 세션 추적 필요
- **문제점**: 데이터 중복, 수동 계산 오류, 복잡한 세션 추적의 어려움

### 1.2 목표
- 복잡한 멀티 서비스 세션 관리 시스템 구축
- 실시간 잔여 세션 추적 및 알림
- 고객별 상세 서비스 히스토리 관리
- 서비스별 장비 설정 및 프로토콜 기록
- 업무 효율성 70% 향상 (복잡성 증가로 인한 목표 상향)

### 1.3 범위 (확장)
- **고객 관리**: 기본 정보 + 서비스 이용 패턴 분석
- **멀티 서비스 세션 관리**: 5가지 서비스 타입별 상세 추적
- **패키지 & 세션 관리**: 복합 패키지의 서비스별 잔여 세션 관리
- **장비 및 프로토콜 관리**: 서비스별 장비 설정 및 지속시간 기록
- **결제 관리**: 패키지 결제 및 개별 세션 과금
- **일정 및 예약 관리**: 서비스별 예약 시스템
- **상세 분석 대시보드**: 서비스별 이용률, 고객 재방문 패턴

## 2. 핵심 기능 요구사항 (대폭 확장)

### 2.1 고객 관리 시스템
#### 기본 정보 관리
- 고객 기본 정보 (이름, 연락처, 주소 등)
- 고객 검색 및 필터링 (이름, 전화번호, 방문일자, 서비스별)
- 고객 프로필 사진 및 메모 관리

#### 고객 서비스 히스토리
- **통합 서비스 이용 내역**: 모든 서비스의 통합 타임라인 뷰
- **고객별 서비스 선호도 분석**: 가장 많이 이용하는 서비스 식별
- **재방문 패턴 분석**: 평균 재방문 주기, 빈도 분석
- **고객 세그멘테이션**: VIP, 일반, 신규 고객 자동 분류

### 2.2 멀티 서비스 세션 관리 시스템 (신규/확장)
#### 서비스 타입 관리
- **브레인 서비스**: 뇌 최적화 프로그램
- **펄스 서비스**: 순환 개선 프로그램 (가장 인기 서비스)
- **림프 서비스**: 림프 순환 개선
- **레드 서비스**: 적외선 치료
- **AI바이크**: AI 기반 운동 프로그램
- **서비스별 설정 관리**: 장비 종류, 강도, 시간, 특별 프로토콜

#### 세션 상세 기록 시스템
```
세션 기록 예시:
- 날짜/시간: 2025-05-15 14:30
- 고객: 허수연
- 서비스: 펄스 + 레드 조합
- 장비 설정: 
  * 펄스: 중강도, 30분, 프로토콜 A
  * 레드: 약강도, 20분, 프로토콜 B
- 특이사항: 고객 컨디션 우수, 다음 세션 강도 상향 권장
- 담당자: 김상담사
```

#### 실시간 세션 추적
- **현재 진행 중인 세션**: 실시간 모니터링 대시보드
- **세션 타이머**: 각 장비별 남은 시간 표시
- **다음 예약**: 고객별 다음 세션 일정 관리
- **세션 완료 자동 기록**: 세션 종료 시 자동으로 이용 내역 업데이트

### 2.3 패키지 & 잔여 세션 관리 시스템 (대폭 확장)
#### 복합 패키지 관리
```
패키지 예시:
종합 패키지 (4종):
- 브레인: 10회 → 현재 잔여: 7회
- 펄스: 10회 → 현재 잔여: 3회  
- 림프: 10회 → 현재 잔여: 8회
- 레드: 10회 → 현재 잔여: 1회 (거의 소진)
```

#### 실시간 잔여 세션 추적
- **서비스별 잔여 횟수**: 실시간 업데이트
- **패키지 소진 알림**: 잔여 2회 이하 시 자동 알림
- **패키지 갱신 추천**: AI 기반 다음 패키지 추천
- **부분 사용 추적**: 세션 중단 시 부분 사용량 기록

#### 패키지 유효기간 관리
- **만료일 추적**: 패키지별 유효기간 관리
- **만료 예정 알림**: 만료 2주 전 자동 알림
- **연장 및 환불 처리**: 유연한 패키지 관리

### 2.4 예약 및 일정 관리 시스템 (신규)
#### 통합 예약 시스템
- **서비스별 예약**: 각 서비스의 소요시간 고려한 스케줄링
- **장비 가용성 확인**: 실시간 장비 사용 현황
- **고객 선호 시간대**: 개인별 선호 시간 학습 및 추천
- **대기자 명단**: 취소 발생 시 자동 안내

#### 캘린더 뷰
- **일별 뷰**: 당일 모든 예약 현황
- **주별 뷰**: 주간 예약 패턴 분석
- **월별 뷰**: 월간 이용률 분석
- **서비스별 필터**: 특정 서비스만 보기

### 2.5 고급 분석 및 인사이트 (대폭 확장)
#### 서비스 이용 분석
- **서비스별 인기도**: 펄스(78%) > 레드(69%) > 림프(46%) > 브레인(38%)
- **시간대별 이용 패턴**: 오전/오후/저녁 이용률 분석
- **계절별 트렌드**: 월별 서비스 선호도 변화
- **고객 재방문 주기**: 평균 재방문 간격 분석

#### 고객 행동 분석
- **고객 생애 가치(CLV)**: 총 구매액, 예상 미래 가치
- **이탈 위험도**: 최근 방문일 기반 이탈 가능성 예측
- **서비스 조합 패턴**: 함께 이용하는 서비스 조합 분석
- **만족도 추정**: 재방문 빈도 기반 만족도 산출

#### 운영 효율성 분석
- **장비 가동률**: 각 장비의 일일 가동 시간
- **직원 생산성**: 담당자별 세션 수행 건수
- **수익성 분석**: 서비스별 수익률 계산
- **용량 계획**: 미래 수요 예측 및 장비 증설 계획

### 2.6 고객 상담 및 케어 시스템 (신규)
#### 상담 기록 관리
- **초기 상담**: 고객 니즈, 건강 상태, 목표 설정
- **진행 상담**: 세션별 피드백, 컨디션 변화
- **정기 점검**: 월별 진행 상황 체크 및 계획 수정
- **상담 내용 템플릿**: 표준화된 상담 양식

#### 개인별 케어 플랜
- **목표 설정**: 고객별 건강 개선 목표
- **추천 프로그램**: AI 기반 최적 서비스 조합 추천
- **진행도 추적**: 목표 대비 현재 진행 상황
- **성과 측정**: 객관적 지표 기반 효과 측정

## 3. 데이터 모델 설계 (대폭 확장)

### 3.1 고객 (Customer)
```sql
customers {
  id: bigint PK
  name: varchar(50)
  phone: varchar(20)
  email: varchar(100)
  birth_date: date
  gender: varchar(10)
  address: text
  notes: text
  
  -- 분석 필드
  first_visit_date: date
  last_visit_date: date
  total_visits: integer
  total_spent: decimal
  customer_segment: varchar(20) -- VIP, Regular, New
  preferred_time_slot: varchar(20)
  
  created_at: timestamp
  updated_at: timestamp
}
```

### 3.2 서비스 타입 (ServiceType)
```sql
service_types {
  id: bigint PK
  name: varchar(50) -- 브레인, 펄스, 림프, 레드, AI바이크
  description: text
  default_duration: integer -- 기본 소요시간(분)
  default_price: decimal
  equipment_required: json -- 필요한 장비 정보
  protocols: json -- 표준 프로토콜들
  is_active: boolean
}
```

### 3.3 세션 기록 (ServiceSession) - 핵심 테이블
```sql
service_sessions {
  id: bigint PK
  customer_id: bigint FK
  service_type_id: bigint FK
  package_usage_id: bigint FK -- 패키지 사용 연결
  
  -- 세션 정보
  session_date: date
  start_time: time
  end_time: time
  duration_minutes: integer
  
  -- 장비 및 설정
  equipment_settings: json -- 장비별 강도, 프로토콜 등
  
  -- 상세 기록
  session_notes: text -- 세션 중 특이사항
  customer_condition: text -- 고객 컨디션
  staff_notes: text -- 직원 코멘트
  
  -- 관리 정보
  conducted_by: bigint FK -- 담당 직원
  is_completed: boolean
  is_partial: boolean -- 중간에 중단된 세션
  
  created_at: timestamp
}
```

### 3.4 패키지 및 사용량 추적 (PackageUsage)
```sql
package_usage {
  id: bigint PK
  customer_id: bigint FK
  package_id: bigint FK
  
  -- 구매 정보
  purchase_date: date
  valid_until: date
  total_amount: decimal
  
  -- 서비스별 할당 및 사용량
  brain_total: integer
  brain_used: integer
  brain_remaining: integer
  
  pulse_total: integer
  pulse_used: integer  
  pulse_remaining: integer
  
  lymph_total: integer
  lymph_used: integer
  lymph_remaining: integer
  
  red_total: integer
  red_used: integer
  red_remaining: integer
  
  ai_bike_total: integer
  ai_bike_used: integer
  ai_bike_remaining: integer
  
  -- 상태 관리
  status: varchar(20) -- active, expired, suspended
  auto_renewal: boolean
  
  created_at: timestamp
  updated_at: timestamp
}
```

### 3.5 예약 시스템 (Reservations)
```sql
reservations {
  id: bigint PK
  customer_id: bigint FK
  service_type_id: bigint FK
  
  -- 예약 정보
  reservation_date: date
  start_time: time
  end_time: time
  duration_minutes: integer
  
  -- 예약 상태
  status: varchar(20) -- scheduled, completed, cancelled, no_show
  equipment_assignments: json -- 할당된 장비 정보
  
  -- 관리 정보
  created_by: bigint FK
  notes: text
  
  created_at: timestamp
  updated_at: timestamp
}
```

## 4. 새로운 기능 명세

### 4.1 실시간 세션 모니터링 대시보드
- **현재 진행 중인 모든 세션**: 실시간 현황판
- **장비별 사용 현황**: 각 장비의 현재 상태
- **다음 예약 목록**: 향후 2시간 내 예약
- **긴급 알림**: 장비 이상, 세션 연장 요청 등

### 4.2 스마트 알림 시스템
- **패키지 소진 알림**: 잔여 2회 이하 시 고객 및 직원에게 알림
- **만료 예정 알림**: 패키지 만료 2주 전 안내
- **재방문 추천**: 평균 방문 주기 기반 자동 연락 제안
- **이탈 위험 고객**: 장기간 미방문 고객 식별

### 4.3 고객 맞춤 추천 시스템
- **최적 서비스 조합**: 고객 이력 기반 효과적인 서비스 조합 추천
- **방문 시간 추천**: 개인별 선호 시간대 학습 및 제안
- **패키지 업그레이드**: 이용 패턴 기반 적절한 패키지 추천

### 4.4 고급 분석 리포트
- **월간 서비스 성과 보고서**: 서비스별 이용률, 수익성 분석
- **고객 코호트 분석**: 신규 고객의 생존 곡선, 재방문 패턴
- **수익성 분석**: 고객별, 서비스별, 시간대별 수익성
- **용량 최적화**: 장비 가동률 기반 운영 효율성 제안

## 5. 우선순위 및 개발 로드맵

### Phase 1 (3주) - 핵심 기능
- 고객 관리 시스템 구축
- 멀티 서비스 세션 기록 시스템
- 패키지 및 잔여 세션 추적
- 기본 예약 시스템

### Phase 2 (3주) - 고급 기능  
- 실시간 세션 모니터링
- 스마트 알림 시스템
- 상세 분석 대시보드
- 고객 상담 기록 시스템

### Phase 3 (2주) - 최적화
- AI 기반 추천 시스템
- 고급 분석 리포트
- 성능 최적화
- 사용자 교육

### Phase 4 (2주) - 안정화
- 실제 데이터 마이그레이션
- 병행 운영
- 안정화 및 버그 수정
- 운영 이관

## 6. 성공 지표 (업데이트)

### 6.1 효율성 지표
- 세션 기록 시간 80% 단축 (수기 → 자동)
- 잔여 세션 확인 시간 95% 단축 (수동 계산 → 실시간)
- 예약 처리 시간 70% 단축
- 고객 정보 조회 시간 90% 단축

### 6.2 정확성 지표
- 잔여 세션 계산 오류 99% 감소
- 이중 예약 오류 100% 제거
- 데이터 불일치 95% 감소

### 6.3 비즈니스 지표
- 고객 재방문율 15% 증가 (개선된 관리로)
- 패키지 갱신율 20% 증가 (적시 알림으로)
- 고객 만족도 4.7/5.0 이상
- 직원 업무 만족도 4.5/5.0 이상

## 7. 기술적 고려사항

### 7.1 성능 요구사항 (강화)
- 실시간 세션 추적: < 500ms 응답시간
- 복잡한 분석 쿼리: < 3초
- 동시 사용자: 20명 이상 지원
- 대용량 데이터: 10만 건 이상 세션 기록 처리

### 7.2 확장성 설계
- 서비스 타입 추가 용이성
- 새로운 장비 통합 가능
- 다중 지점 확장 고려
- API 기반 외부 시스템 연동

이 업데이트된 PRD는 실제 고객관리대장 데이터 분석을 바탕으로 현실적이고 실용적인 요구사항을 반영하였습니다.